{"remainingRequest":"C:\\senator-shop\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\senator-shop\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\senator-shop\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\senator-shop\\frontend\\src\\router\\index.js","dependencies":[{"path":"C:\\senator-shop\\frontend\\src\\router\\index.js","mtime":1589696842636},{"path":"C:\\senator-shop\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\senator-shop\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\senator-shop\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\senator-shop\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFNlY3VyZWQgZnJvbSAnQC92aWV3cy9TZWN1cmVkLnZ1ZSc7CmltcG9ydCBMb2dpbiBmcm9tICdAL3ZpZXdzL0xvZ2luLnZ1ZSc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdsb2dpbicsCiAgY29tcG9uZW50OiBMb2dpbgp9LCB7CiAgcGF0aDogJy9yZWdpc3RyYXRpb24nLAogIG5hbWU6ICdyZWdpc3RyYXRpb24nLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy9SZWdpc3RyYXRpb24udnVlJyk7CiAgfQp9LCB7CiAgcGF0aDogJy9zZWN1cmVkJywKICBuYW1lOiAnc2VjdXJlZCcsCiAgY29tcG9uZW50OiBTZWN1cmVkLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICcvYWRtaW4nLAogIG5hbWU6ICdhZG1pbicsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCdAL3ZpZXdzL1NlY3VyZWRBZG1pbi52dWUnKTsKICB9LAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgIHJlcXVpcmVzQXV0aEFkbWluOiB0cnVlCiAgfQp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIGxvZ2dlZEluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICB2YXIgaXNBZG1pbiA9IGZhbHNlOwoKICBpZiAobG9nZ2VkSW4pIHsKICAgIHZhciB1c2VyRGF0YSA9IEpTT04ucGFyc2UobG9nZ2VkSW4pOwogICAgaXNBZG1pbiA9IHVzZXJEYXRhLnJvbGVzTGlzdC5pbmNsdWRlcygnQURNSU4nKTsKICB9CgogIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLnJlcXVpcmVzQXV0aEFkbWluOwogIH0pICYmICFpc0FkbWluKSB7CiAgICBuZXh0KCcvJyk7CiAgfQoKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGg7CiAgfSkgJiYgIWxvZ2dlZEluKSB7CiAgICBuZXh0KCcvJyk7CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["C:/senator-shop/frontend/src/router/index.js"],"names":["Vue","VueRouter","Secured","Login","use","routes","path","name","component","meta","requiresAuth","requiresAuthAdmin","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","loggedIn","localStorage","getItem","isAdmin","userData","JSON","parse","rolesList","includes","matched","some","record"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,SAAR;AAEA,IAAMI,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAEL;AAHb,CADa,EAMb;AACEG,EAAAA,IAAI,EAAE,eADR;AAEEC,EAAAA,IAAI,EAAE,cAFR;AAGEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,0BAAP,CAAN;AAAA;AAHb,CANa,EAWb;AACEF,EAAAA,IAAI,EAAE,UADR;AAEEC,EAAAA,IAAI,EAAE,SAFR;AAGEC,EAAAA,SAAS,EAAEN,OAHb;AAIEO,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJR,CAXa,EAiBb;AACEJ,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,0BAAP,CAAN;AAAA,GAHb;AAIEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE,IAAhB;AAAsBC,IAAAA,iBAAiB,EAAE;AAAzC;AAJR,CAjBa,CAAf;AAyBA,IAAMC,MAAM,GAAG,IAAIX,SAAJ,CAAc;AAC3BY,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;AAG3BZ,EAAAA,MAAM,EAANA;AAH2B,CAAd,CAAf;AAMAO,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB;AACA,MAAIC,OAAO,GAAG,KAAd;;AACA,MAAIH,QAAJ,EAAc;AACZ,QAAMI,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWN,QAAX,CAAjB;AACAG,IAAAA,OAAO,GAAGC,QAAQ,CAACG,SAAT,CAAmBC,QAAnB,CAA4B,OAA5B,CAAV;AACD;;AACD,MAAIX,EAAE,CAACY,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACxB,IAAP,CAAYE,iBAAhB;AAAA,GAAtB,KAA4D,CAACc,OAAjE,EAA0E;AACxEJ,IAAAA,IAAI,CAAC,GAAD,CAAJ;AACD;;AACD,MAAIF,EAAE,CAACY,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACxB,IAAP,CAAYC,YAAhB;AAAA,GAAtB,KAAuD,CAACY,QAA5D,EAAsE;AACpED,IAAAA,IAAI,CAAC,GAAD,CAAJ;AACD,GAFD,MAEO;AACLA,IAAAA,IAAI;AACL;AACF,CAfD;AAiBA,eAAeT,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Secured from '@/views/Secured.vue'\r\nimport Login from '@/views/Login.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'login',\r\n    component: Login\r\n  },\r\n  {\r\n    path: '/registration',\r\n    name: 'registration',\r\n    component: () => import('@/views/Registration.vue')\r\n  },\r\n  {\r\n    path: '/secured',\r\n    name: 'secured',\r\n    component: Secured,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/admin',\r\n    name: 'admin',\r\n    component: () => import('@/views/SecuredAdmin.vue'),\r\n    meta: { requiresAuth: true, requiresAuthAdmin: true }\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const loggedIn = localStorage.getItem('user')\r\n  let isAdmin = false\r\n  if (loggedIn) {\r\n    const userData = JSON.parse(loggedIn)\r\n    isAdmin = userData.rolesList.includes('ADMIN')\r\n  }\r\n  if (to.matched.some(record => record.meta.requiresAuthAdmin) && !isAdmin) {\r\n    next('/')\r\n  }\r\n  if (to.matched.some(record => record.meta.requiresAuth) && !loggedIn) {\r\n    next('/')\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router\r\n"]}]}